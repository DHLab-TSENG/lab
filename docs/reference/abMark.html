<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get abnormal mark — getAbnormalMark • lab</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get abnormal mark — getAbnormalMark" />

<meta property="og:description" content="getAbnormalMark generates a new column recorded abnormal values: high H and L." />





<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lab</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/DHLab-TSENG/lab/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get abnormal mark</h1>
    <small class="dont-index">Source: <a href='http://github.com/DHLab-TSENG/lab/blob/master/R/getAbnormalMark.R'><code>R/getAbnormalMark.R</code></a>, <a href='http://github.com/DHLab-TSENG/lab/blob/master/R/labFun.R'><code>R/labFun.R</code></a></small>
    <div class="hidden name"><code>abMark.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>getAbnormalMark</code> generates a new column recorded abnormal values: high <code>H</code> and <code>L</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>getAbnormalMark</span>(
  <span class='no'>labData</span>,
  <span class='no'>idColName</span>,
  <span class='no'>labItemColName</span>,
  <span class='no'>valueColName</span>,
  <span class='no'>genderColName</span>,
  <span class='no'>genderTable</span>,
  <span class='kw'>referenceTable</span> <span class='kw'>=</span> <span class='no'>refLOINC</span>
)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>labData</th>
      <td><p>a file or dataframe of laboratory test data with at least 4 columns about patient ID, lab item, test value and test date, respectively.</p></td>
    </tr>
    <tr>
      <th>idColName</th>
      <td><p>the column name that records patient ID in labData.</p></td>
    </tr>
    <tr>
      <th>labItemColName</th>
      <td><p>the column name that records lab item in labData. If lab code is combined by multiple columns, then just simply add <code>+</code> operator between column names, e.g., <code>A + B</code>.</p></td>
    </tr>
    <tr>
      <th>valueColName</th>
      <td><p>the column name that records test value in labData. Only numeric value is acceptable.</p></td>
    </tr>
    <tr>
      <th>genderColName</th>
      <td><p>the column name that records gender of each patient. Gender should be coded as <code>M</code> or <code>F</code>.</p></td>
    </tr>
    <tr>
      <th>referenceTable</th>
      <td><p>a data table that records reference values of each lab item. Column names should be: <code>LowerBound_Male</code>, <code>UpperBound_Male</code>, <code>LowerBound_Female</code>, <code>UpperBound_Female</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>data.table</code> merged two tables.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This step is optional but recommended. Reference ranges differ in different institutions, so a user-defined reference table is needed. The table should record the reference values for male and female separately. Lower bound can be expressed as <code>&lt;</code>, <code>(</code> (greater than) or  <code>&lt;=</code> , <code>[</code> (great tham or euqal to), and the expression of upper bound is similar. If there is no upper bound or lower bound, just remain empty. After the new abnormal flag column generated, it can be used to do categorical analysis, or be used in the function: <code>plotTimeSeriesLab</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='mapLOINC.html'>mapLOINC</a></span>(<span class='kw'>labData</span> <span class='kw'>=</span> <span class='no'>labMIMIC</span>,
        <span class='kw'>labItemColName</span> <span class='kw'>=</span> <span class='no'>ITEMID</span>,
        <span class='kw'>mappingTable</span> <span class='kw'>=</span> <span class='no'>mapMIMIC</span>)</div><div class='output co'>#&gt;         ITEMID ROW_ID.x SUBJECT_ID HADM_ID           CHARTTIME VALUE VALUENUM
#&gt;      1:  50800      282          3      NA 2101-10-12 18:17:00   ART       NA
#&gt;      2:  50800      394          3      NA 2101-10-15 12:42:00   ART       NA
#&gt;      3:  50800      966          3  145834 2101-10-22 04:31:00   ART       NA
#&gt;      4:  50800      984          3  145834 2101-10-22 07:13:00   ART       NA
#&gt;      5:  50800      994          3  145834 2101-10-22 10:16:00   ART       NA
#&gt;     ---                                                                      
#&gt;  99996:  51523    90310        147  103631 2158-06-24 17:20:00  HOLD       NA
#&gt;  99997:  51523    93500        151  151029 2145-05-06 19:39:00  HOLD       NA
#&gt;  99998:  51523    92888        149  154869 2135-02-18 10:30:00  HOLD       NA
#&gt;  99999:  51523    95640        155  147148 2125-09-10 10:45:00  HOLD       NA
#&gt; 100000:  51529    24741         55      NA 2140-03-22 08:00:00   126      126
#&gt;         VALUEUOM     FLAG ROW_ID.y                    LABEL FLUID  CATEGORY
#&gt;      1:                          1            SPECIMEN TYPE BLOOD BLOOD GAS
#&gt;      2:                          1            SPECIMEN TYPE BLOOD BLOOD GAS
#&gt;      3:                          1            SPECIMEN TYPE BLOOD BLOOD GAS
#&gt;      4:                          1            SPECIMEN TYPE BLOOD BLOOD GAS
#&gt;      5:                          1            SPECIMEN TYPE BLOOD BLOOD GAS
#&gt;     ---                                                                    
#&gt;  99996:                        723                  GR HOLD URINE CHEMISTRY
#&gt;  99997:                        723                  GR HOLD URINE CHEMISTRY
#&gt;  99998:                        723                  GR HOLD URINE CHEMISTRY
#&gt;  99999:                        723                  GR HOLD URINE CHEMISTRY
#&gt; 100000:    mg/dL abnormal      729 Estimated Actual Glucose BLOOD CHEMISTRY
#&gt;         LOINC_CODE
#&gt;      1:           
#&gt;      2:           
#&gt;      3:           
#&gt;      4:           
#&gt;      5:           
#&gt;     ---           
#&gt;  99996:           
#&gt;  99997:           
#&gt;  99998:           
#&gt;  99999:           
#&gt; 100000:           </div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Chen-Ju Chen, Yi-Ju Tseng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


