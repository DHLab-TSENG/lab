<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>KNN Imputation — imputeKNN • lab</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="KNN Imputation — imputeKNN"><meta property="og:description" content="imputeKNN uses k-nearest neighbors (kNN) method to fill missing values."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lab</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/DHLab-TSENG/lab/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>KNN Imputation</h1>
    <small class="dont-index">Source: <a href="http://github.com/DHLab-TSENG/lab/blob/HEAD/R/imputeKNN.R" class="external-link"><code>R/imputeKNN.R</code></a>, <a href="http://github.com/DHLab-TSENG/lab/blob/HEAD/R/labFun.R" class="external-link"><code>R/labFun.R</code></a></small>
    <div class="hidden name"><code>impKNN.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>imputeKNN</code> uses k-nearest neighbors (kNN) method to fill missing values.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">imputeKNN</span><span class="op">(</span><span class="va">labData</span>, <span class="va">idColName</span>, <span class="va">k</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>labData</dt>
<dd><p>a file or dataframe of laboratory test data with at least 4 columns about patient ID, lab item, test value and test date, respectively.</p></dd>


<dt>idColName</dt>
<dd><p>the column name that records patient ID in labData.</p></dd>


<dt>k</dt>
<dd><p>the numbers of selected nearestZneighbors.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A new, wide-formatted imputed <code>data.table</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Given wide format data, data can conduct KNN imputation. If lab item code are composed by multiple columns, it will automatically combined as one. All other columns will all be seen as value columns.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">timeSeriesData</span> <span class="op">&lt;-</span> <span class="fu"><a href="getTS.html">getTimeSeriesLab</a></span><span class="op">(</span>labData <span class="op">=</span> <span class="va">labSample</span>,</span></span>
<span class="r-in"><span>                                   idColName <span class="op">=</span> <span class="va">SUBJECT_ID</span>,</span></span>
<span class="r-in"><span>                                   labItemColName <span class="op">=</span> <span class="va">ITEMID</span>,</span></span>
<span class="r-in"><span>                                   dateColName <span class="op">=</span> <span class="va">CHARTTIME</span>,</span></span>
<span class="r-in"><span>                                   valueColName <span class="op">=</span> <span class="va">VALUENUM</span>,</span></span>
<span class="r-in"><span>                                   indexDate <span class="op">=</span> <span class="va">first</span>,</span></span>
<span class="r-in"><span>                                   gapDate <span class="op">=</span> <span class="fl">360</span>,</span></span>
<span class="r-in"><span>                                   completeWindows <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wideData</span> <span class="op">&lt;-</span> <span class="fu"><a href="wideTS.html">wideTimeSeriesLab</a></span><span class="op">(</span>labData <span class="op">=</span> <span class="va">timeSeriesData</span>,</span></span>
<span class="r-in"><span>                  idColName <span class="op">=</span> <span class="va">ID</span>,</span></span>
<span class="r-in"><span>                  labItemColName <span class="op">=</span> <span class="va">ITEMID</span>,</span></span>
<span class="r-in"><span>                  windowColName <span class="op">=</span> <span class="va">Window</span>,</span></span>
<span class="r-in"><span>                  valueColName <span class="op">=</span> <span class="va">Max</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">imputeKNN</span><span class="op">(</span>labData <span class="op">=</span> <span class="va">wideData</span>,</span></span>
<span class="r-in"><span>          idColName <span class="op">=</span> <span class="va">ID</span> <span class="op">+</span> <span class="va">Window</span>,</span></span>
<span class="r-in"><span>          k <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ID Window    50811  50861    50904   50906  50912  50931  51222</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  36      1 12.70000   12.0 41.50000 114.000  2.000 161.00 14.600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:  36      2 12.70000  619.0 46.25000 117.000  2.050 296.50 14.250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:  36      3 12.70000  315.5 43.87500 115.500  2.025 228.75 14.425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:  36      4 12.85000   12.0 36.75000 111.000  1.000 126.00 14.400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 109      1 12.77500   51.0 39.12500 112.500 13.600 151.00 15.700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 109      2 12.73750  638.5 45.06250 116.250  7.850 291.50 14.800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 109      3 12.73750   38.0 40.31250 113.250  6.600 150.00 14.400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 109      4  7.20000   80.0 39.71875 112.875  8.800 256.00 11.300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 109      5  6.90000   78.0 39.71875 112.875 10.500 154.00 13.100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 132      1 12.75625   59.0 39.71875 112.875  0.600 138.00 15.100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 143      1 12.70000 1226.0 51.00000 120.000  2.100 432.00 13.900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 145      1 13.00000  252.0 32.00000 108.000 10.800 231.00 12.900</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Chen-Ju Chen, Yi-Ju Tseng.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

